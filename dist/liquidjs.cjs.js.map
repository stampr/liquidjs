{"version":3,"file":"liquidjs.cjs.js","sources":["../src/util/underscore.js","../src/lexical.js","../src/util/error.js","../src/util/assert.js","../src/util/compatibility.js","../src/scope.js","../src/whitespace-ctrl.js","../src/tokenizer.js","../src/util/fs.js","../node_modules/resolve-url/resolve-url.js","../src/util/url.js","../src/safe-object.js","../src/operators.js","../src/syntax.js","../src/util/promise.js","../src/render.js","../src/tag.js","../src/filter.js","../src/parser.js","../src/tags/assign.js","../src/tags/capture.js","../src/tags/case.js","../src/tags/comment.js","../src/tags/cycle.js","../src/tags/decrement.js","../src/tags/for.js","../src/tags/if.js","../src/tags/include.js","../src/tags/increment.js","../src/tags/layout.js","../src/tags/raw.js","../src/tags/tablerow.js","../src/tags/unless.js","../src/tags/index.js","../src/util/strftime.js","../src/util/args.js","../src/util/object-path.js","../src/locale.js","../src/filters.js","../src/main.js"],"sourcesContent":["const toStr = Object.prototype.toString\n\n/*\n * Checks if value is classified as a String primitive or object.\n * @param {any} value The value to check.\n * @return {Boolean} Returns true if value is a string, else false.\n */\nexport function isString (value) {\n  return value instanceof String || typeof value === 'string'\n}\n\nexport function isNil (value) {\n  return value === null || value === undefined\n}\n\nexport function isArray (value) {\n  // be compatible with IE 8\n  return toStr.call(value) === '[object Array]'\n}\n\nexport function isError (value) {\n  var signature = Object.prototype.toString.call(value)\n  // [object XXXError]\n  return signature.substr(-6, 5) === 'Error' ||\n        (typeof value.message === 'string' && typeof value.name === 'string')\n}\n\n/*\n * Iterates over own enumerable string keyed properties of an object and invokes iteratee for each property.\n * The iteratee is invoked with three arguments: (value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning false.\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @return {Object} Returns object.\n */\nexport function forOwn (object, iteratee) {\n  object = object || {}\n  for (var k in object) {\n    if (object.hasOwnProperty(k)) {\n      if (iteratee(object[k], k, object) === false) break\n    }\n  }\n  return object\n}\n\n/*\n * Assigns own enumerable string keyed properties of source objects to the destination object.\n * Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * Note: This method mutates object and is loosely based on Object.assign.\n *\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @return {Object} Returns object.\n */\nexport function assign (object) {\n  object = isObject(object) ? object : {}\n  var srcs = Array.prototype.slice.call(arguments, 1)\n  srcs.forEach(function (src) {\n    _assignBinary(object, src)\n  })\n  return object\n}\n\nexport function _assignBinary (dst, src) {\n  forOwn(src, function (v, k) {\n    dst[k] = v\n  })\n  return dst\n}\n\nexport function last (arr) {\n  return arr[arr.length - 1]\n}\n\nexport function uniq (arr) {\n  var u = {}\n  var a = []\n  for (var i = 0, l = arr.length; i < l; ++i) {\n    if (u.hasOwnProperty(arr[i])) {\n      continue\n    }\n    a.push(arr[i])\n    u[arr[i]] = 1\n  }\n  return a\n}\n\n/*\n * Checks if value is the language type of Object.\n * (e.g. arrays, functions, objects, regexes, new Number(0), and new String(''))\n * @param {any} value The value to check.\n * @return {Boolean} Returns true if value is an object, else false.\n */\nexport function isObject (value) {\n  var type = typeof value\n  return value != null && (type === 'object' || type === 'function')\n}\n\n/*\n * A function to create flexibly-numbered lists of integers,\n * handy for each and map loops. start, if omitted, defaults to 0; step defaults to 1.\n * Returns a list of integers from start (inclusive) to stop (exclusive),\n * incremented (or decremented) by step, exclusive.\n * Note that ranges that stop before they start are considered to be zero-length instead of\n * negative — if you'd like a negative range, use a negative step.\n */\nexport function range (start, stop, step) {\n  if (arguments.length === 1) {\n    stop = start\n    start = 0\n  }\n  step = step || 1\n\n  var arr = []\n  for (var i = start; i < stop; i += step) {\n    arr.push(i)\n  }\n  return arr\n}\n","function EmptyVariable(){}\nEmptyVariable.prototype.toString = function() { return ''; };\nEmptyVariable.prototype.toJSON = function() { return ''; };\n\nexport const EMPTY = new EmptyVariable();\n\n// quote related\nexport const singleQuoted = /'[^']*'/;\nexport const doubleQuoted = /\"[^\"]*\"/;\nexport const quoted = new RegExp(`${singleQuoted.source}|${doubleQuoted.source}`);\nexport const quoteBalanced = new RegExp(`(?:${quoted.source}|[^'\"])*`);\n\n// basic types\nexport const integer = /-?\\d+/;\nexport const number = /-?\\d+\\.?\\d*|\\.?\\d+/;\nexport const bool = /true|false/;\n\n// peoperty access\nexport const identifier = /[\\w-]+/;\nexport const subscript = new RegExp(`\\\\[(?:${quoted.source}|[\\\\w-\\\\.]+)\\\\]`);\nexport const literal = new RegExp(`(?:${quoted.source}|${bool.source}|${number.source}|nil|null|empty|blank)`);\nexport const variable = new RegExp(`${identifier.source}(?:\\\\.${identifier.source}|${subscript.source})*`);\n\n// range related\nexport const rangeLimit = new RegExp(`(?:${variable.source}|${number.source})`);\nexport const range = new RegExp(`\\\\(${rangeLimit.source}\\\\.\\\\.${rangeLimit.source}\\\\)`);\nexport const rangeCapture = new RegExp(`\\\\((${rangeLimit.source})\\\\.\\\\.(${rangeLimit.source})\\\\)`);\n\nexport const value = new RegExp(`(?:${variable.source}|${literal.source}|${range.source})`);\n\n// hash related\nexport const hash = new RegExp(`(?:${identifier.source})\\\\s*:\\\\s*(?:${value.source})`);\nexport const hashCapture = new RegExp(`(${identifier.source})\\\\s*:\\\\s*(${value.source})`, 'g');\n\n// full match\nexport const tagLine = new RegExp(`^\\\\s*(${identifier.source})\\\\s*([\\\\s\\\\S]*)\\\\s*$`);\nexport const literalLine = new RegExp(`^${literal.source}$`, 'i');\nexport const variableLine = new RegExp(`^${variable.source}$`);\nexport const numberLine = new RegExp(`^${number.source}$`);\nexport const boolLine = new RegExp(`^${bool.source}$`, 'i');\nexport const quotedLine = new RegExp(`^${quoted.source}$`);\nexport const rangeLine = new RegExp(`^${rangeCapture.source}$`);\nexport const integerLine = new RegExp(`^${integer.source}$`);\n\n// filter related\nexport const valueDeclaration = new RegExp(`(?:${identifier.source}\\\\s*:\\\\s*)?${value.source}`);\nexport const valueList = new RegExp(`${valueDeclaration.source}(\\\\s*,\\\\s*${valueDeclaration.source})*`);\nexport const filter = new RegExp(`${identifier.source}(?:\\\\s*:\\\\s*${valueList.source})?`, 'g');\nexport const filterCapture = new RegExp(`(${identifier.source})(?:\\\\s*:\\\\s*(${valueList.source}))?`);\nexport const filterLine = new RegExp(`^${filterCapture.source}$`);\n\nexport const operators = [\n  /\\s+or\\s+/,\n  /\\s+and\\s+/,\n  /==|!=|<=|>=|<|>|\\s+contains\\s+/\n];\n\nexport function isInteger (str) {\n  return integerLine.test(str)\n}\n\nexport function isLiteral (str) {\n  return literalLine.test(str)\n}\n\nexport function isRange (str) {\n  return rangeLine.test(str)\n}\n\nexport function isVariable (str) {\n  return variableLine.test(str)\n}\n\nexport function matchValue (str) {\n  return value.exec(str)\n}\n\nexport function parseLiteral (str) {\n  if ([ 'nil', 'null' ].indexOf(str) > -1) {\n    // console.log('parseLiteral; nil', str);\n    return null;\n  }\n  if ([ 'empty', 'blank' ].indexOf(str) > -1) {\n    // console.log('parseLiteral; empty', str);\n    return EMPTY;\n  }\n  var res = str.match(numberLine);\n  if (res) {\n    // console.log('parseLiteral; number', str);\n    return Number(str);\n  }\n  res = str.match(boolLine);\n  if (res) {\n    // console.log('parseLiteral; bool', str);\n    return str.toLowerCase() === 'true';\n  }\n  res = str.match(quotedLine);\n  if (res) {\n    // console.log('parseLiteral; quoted', str);\n    return str.slice(1, -1);\n  }\n  throw new TypeError(`cannot parse '${str}' as literal`);\n}\n","import * as _ from './underscore.js';\n\nfunction initError () {\n  this.name = this.constructor.name\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor)\n  }\n}\n\nfunction initLiquidError (err, token) {\n  initError.call(this)\n\n  this.input = token.input\n  this.line = token.line\n  this.file = token.file\n\n  var context = mkContext(token.input, token.line)\n  this.message = mkMessage(err.message, token)\n  this.stack = context +\n    '\\n' + (this.stack || this.message) +\n      (err.stack ? '\\nFrom ' + err.stack : '')\n}\n\nexport function TokenizationError (message, token) {\n  initLiquidError.call(this, {message: message}, token)\n}\nTokenizationError.prototype = Object.create(Error.prototype)\nTokenizationError.prototype.constructor = TokenizationError\n\nexport function ParseError (e, token) {\n  _.assign(this, e)\n  this.originalError = e\n\n  initLiquidError.call(this, e, token)\n}\nParseError.prototype = Object.create(Error.prototype)\nParseError.prototype.constructor = ParseError\n\nexport function RenderError (e, tpl) {\n  // return the original render error\n  if (e instanceof RenderError) {\n    return e\n  }\n  _.assign(this, e)\n  this.originalError = e\n\n  initLiquidError.call(this, e, tpl.token)\n}\nRenderError.prototype = Object.create(Error.prototype)\nRenderError.prototype.constructor = RenderError\n\nexport function RenderBreakError (message) {\n  initError.call(this)\n  this.message = message + ''\n}\nRenderBreakError.prototype = Object.create(Error.prototype)\nRenderBreakError.prototype.constructor = RenderBreakError\n\nexport function AssertionError (message) {\n  initError.call(this)\n  this.message = message + ''\n}\nAssertionError.prototype = Object.create(Error.prototype)\nAssertionError.prototype.constructor = AssertionError\n\nfunction mkContext (input, line) {\n  var lines = input.split('\\n')\n  var begin = Math.max(line - 2, 1)\n  var end = Math.min(line + 3, lines.length)\n\n  var context = _\n    .range(begin, end + 1)\n    .map(l => [\n      (l === line) ? '>> ' : '   ',\n      align(l, end),\n      '| ',\n      lines[l - 1]\n    ].join(''))\n    .join('\\n')\n\n  return context\n}\n\nfunction align (n, max) {\n  var length = (max + '').length\n  var str = n + ''\n  var blank = Array(length - str.length).join(' ')\n  return blank + str\n}\n\nfunction mkMessage (msg, token) {\n  msg = msg || ''\n  if (token.file) {\n    msg += ', file:' + token.file\n  }\n  if (token.line) {\n    msg += ', line:' + token.line\n  }\n  return msg\n}\n","import { AssertionError } from './error.js';\n\nfunction assert (predicate, message) {\n  if (!predicate) {\n    message = message || `expect ${predicate} to be true`\n    throw new AssertionError(message)\n  }\n}\n\nexport default assert;\n","const isNull = value => value === null || value === undefined;\n\nexport function compatSize(result) {\n  if (Array.isArray(result) || typeof result === 'string') {\n    return result.length;\n  }\n  else if (isNull(result)) {\n    return 0;\n  }\n  else if (typeof result === 'object') {\n    // objects that don't have their own property \"size\" defined\n    // should return key length\n    if ('size' in result) {\n      return result.size;\n    }\n    else {\n      return Object.keys(result).length;\n    }\n  }\n  else {\n    return result;\n  }\n}\n\nexport function compatFirst(result) {\n  if (Array.isArray(result) || typeof result === 'string') {\n    return result.length > 0 ? result[0] : null;\n  }\n  else if (isNull(result)) {\n    return null;\n  }\n  else if (typeof result === 'object') {\n    if ('first' in result) {\n      return result.first;\n    }\n    else {\n      let keys = Object.keys(result);\n      if (keys.length <= 0) return null;\n      let first = keys[0];\n      return result[first];\n    }\n  }\n  else {\n    return result;\n  }\n}\n\nexport function compatLast(result) {\n  if (Array.isArray(result) || typeof result === 'string') {\n    return result.length > 0 ? result[result.length - 1] : null;\n  }\n  else if (isNull(result)) {\n    return null;\n  }\n  else if (typeof result === 'object') {\n    if ('last' in result) {\n      return result.last;\n    }\n    else {\n      let keys = Object.keys(result);\n      if (keys.length <= 0) return null;\n      let last = keys[keys.length - 1];\n      return result[last];\n    }\n  }\n  else {\n    return result;\n  }\n}\n","import * as _ from './util/underscore.js';\nimport * as lexical from './lexical.js';\nimport assert from './util/assert.js';\nimport { AssertionError } from './util/error.js';\nimport * as compatibility from './util/compatibility.js';\n\nexport const delimiters = [ `'`, '\"' ];\n\nexport const forbidden = [\n  'empty',\n  'blank',\n  'nil',\n  'null',\n  'undefined',\n  'true',\n  'false',\n  '',\n];\n\nexport function isVariableValid(varName) {\n  return forbidden.indexOf((varName || '').trim().toLowerCase()) < 0;\n};\n\nexport function validateContextObject(ctx) {\n  if (null === ctx || undefined === ctx) return;\n  let keys = Object.keys(ctx);\n  keys.forEach(v => {\n    if (!isVariableValid(v)) {\n      throw new Error(`invalid context variable name; \"${v}\" is forbidden`);\n    }\n  });\n};\n\nvar Scope = {\n  getAll: function () {\n    var ctx = {};\n    for (var i = this.scopes.length - 1; i >= 0; i--) {\n      _.assign(ctx, this.scopes[i])\n    }\n    return ctx;\n  },\n  getFromContext: function(str) {\n    return new Promise((resolve, reject) => {\n      this.getPropertyByPath(this.scopes, str).then(resolve).catch(err => {\n        // console.log('get -> getPropertyByPath returned err:', err.message);\n        if (!/undefined variable/.test(err.message) || this.opts.strict_variables) {\n          // console.log('\\t-> rejecting');\n          return reject(err);\n        }\n        else {\n          // console.log('\\t-> resolving undefined');\n          return resolve(undefined);\n        }\n      });\n    });\n  },\n  get: function (str) {\n    if (this.opts.beforeScopeProvides) {\n      return this.opts.beforeScopeProvides(str, this).then(() => {\n        return this.getFromContext(str);\n      });\n    }\n    else {\n      return this.getFromContext(str);\n    }\n  },\n  set: function (k, v) {\n    if (!isVariableValid(k)) throw new Error(`invalid variable name; \"${v}\" is forbidden`);\n    var scope = this.findScopeFor(k);\n    setPropertyByPath(scope, k, v);\n    return this;\n  },\n  push: function (ctx) {\n    assert(ctx, `trying to push ${ctx} into scopes`);\n    validateContextObject(ctx);\n    return this.scopes.push(ctx);\n  },\n  pop: function () {\n    return this.scopes.pop();\n  },\n  findScopeFor: function (key) {\n    var i = this.scopes.length - 1\n    while (i >= 0 && !(key in this.scopes[i])) {\n      i--\n    }\n    if (i < 0) {\n      i = this.scopes.length - 1\n    }\n    return this.scopes[i]\n  },\n  unshift: function (ctx) {\n    assert(ctx, `trying to push ${ctx} into scopes`)\n    validateContextObject(ctx);\n    return this.scopes.unshift(ctx);\n  },\n  shift: function () {\n    return this.scopes.shift();\n  },\n\n  getPropertyByPath: function (scopes, path) {\n    return this.propertyAccessSeq(path + '').then(paths => {\n      if (!paths.length) {\n        throw new TypeError(`undefined variable: \"${path}\"`);\n      }\n      var key = paths.shift();\n      var value = getValueFromScopes(key, scopes);\n      return paths.reduce((value, key) => {\n        return value.then(value => getValueFromParent(key, value));\n      }, Promise.resolve(value));\n    });\n  },\n\n  /*\n   * Parse property access sequence from access string\n   * @example\n   * accessSeq(\"foo.bar\")            // ['foo', 'bar']\n   * accessSeq(\"foo['bar']\")      // ['foo', 'bar']\n   * accessSeq(\"foo['b]r']\")      // ['foo', 'b]r']\n   * accessSeq(\"foo[bar.coo]\")    // ['foo', 'bar'], for bar.coo == 'bar'\n   */\n  propertyAccessSeq: function (str) {\n    // log = console.log.bind(console, `\"${str}\"`);\n    let tokenProviders = [];\n    let strLen = str.length;\n    for (let cursor=0; cursor < strLen;) {\n      // log('[loop]', str[cursor]);\n      switch (str[cursor]) {\n        case '[':\n          let delimiter = str[cursor + 1]\n          if (delimiters.indexOf(delimiter) > -1) { // access by quoted name: foo[\"bar\"]\n            let nameEndIndex = str.indexOf(delimiter, cursor + 2);\n            if (nameEndIndex < 0) {\n              return Promise.reject(new AssertionError(`unbalanced ${delimiter}: \"${str}\"`));\n            }\n            let nameToken = str.slice(cursor + 2, nameEndIndex);\n            tokenProviders.push(Promise.resolve(nameToken));\n            cursor = nameEndIndex + 2; // the closing \" and ]\n            // log('BRACKET w/delimiter',nameEndIndex, nameToken);\n          }\n          else { // access by variable: foo[bar.coo]\n            let variableEndIndex = matchRightBracket(str, cursor + 1);\n            if (variableEndIndex < 0) {\n              return Promise.reject(new AssertionError(`unbalanced []: \"${str}\"`));\n            }\n            let variableToken = str.slice(cursor + 1, variableEndIndex);\n            if (lexical.isInteger(variableToken)) { // foo[1]\n              // log('BRACKET; number', variableToken);\n              tokenProviders.push(Promise.resolve(variableToken));\n            }\n            else {\n              // log('BRACKET; name', variableToken);\n              tokenProviders.push(this.get(variableToken));\n            }\n            cursor = variableEndIndex + 1;\n          }\n          break;\n        case '.': // separator: foo.bar, foo[0].bar\n          cursor++;\n          // log('DOT');\n          break;\n        default: // access by unquoted name: foo.bar\n          let nextBracketIndex    = str.indexOf('[', cursor);\n          let nextDotIndex        = str.indexOf('.', cursor);\n          let foundIndexes        = [ strLen, nextBracketIndex, nextDotIndex ].filter(index => index > -1);\n          let nextSeparator       = Math.min.apply(Math, foundIndexes);\n          let unquotedNameToken   = str.slice(cursor, nextSeparator);\n          // log('DEFAULT', {nextBracketIndex,nextDotIndex,nextSeparator,unquotedNameToken});\n          tokenProviders.push(Promise.resolve(unquotedNameToken));\n          cursor = nextSeparator;\n          break;\n      }\n    }\n    return Promise.all(tokenProviders);\n  },\n}\n\nexport function setPropertyByPath(obj, path, val) {\n  var paths = (path + '').replace(/\\[/g, '.').replace(/\\]/g, '').split('.')\n  for (var i = 0; i < paths.length; i++) {\n    var key = paths[i]\n    if (!_.isObject(obj)) {\n      // cannot set property of non-object\n      return\n    }\n    // for end point\n    if (i === paths.length - 1) {\n      return (obj[key] = val)\n    }\n    // if path not exist\n    if (undefined === obj[key]) {\n      obj[key] = {}\n    }\n    obj = obj[key]\n  }\n}\n\nexport function getValueFromParent (key, value) {\n  if ('size' === key) {\n    return compatibility.compatSize(value);\n  }\n  else if ('first' === key) {\n    return compatibility.compatFirst(value);\n  }\n  else if ('last' === key) {\n    return compatibility.compatLast(value);\n  }\n  else {\n    if (_.isNil(value)) {\n      throw new TypeError(`undefined variable: \"${key}\"`);\n    }\n    return value[key];\n  }\n}\n\nexport function getValueFromScopes (key, scopes) {\n  for (var i = scopes.length - 1; i > -1; i--) {\n    var scope = scopes[i]\n    if (scope.hasOwnProperty(key)) {\n      return scope[key]\n    }\n  }\n  throw new TypeError(`undefined variable: \"${key}\"`)\n}\n\nexport function matchRightBracket (str, begin) {\n  var stack = 1 // count of '[' - count of ']'\n  for (var i = begin; i < str.length; i++) {\n    if (str[i] === '[') {\n      stack++\n    }\n    if (str[i] === ']') {\n      stack--\n      if (stack === 0) {\n        return i\n      }\n    }\n  }\n  return -1\n}\n\nexport function createScope(ctx, opts) {\n  var defaultOptions = {\n    dynamicPartials: true,\n    strict_variables: false,\n    strict_filters: false,\n    blocks: {},\n    root: [],\n  }\n  var scope = Object.create(Scope)\n  scope.opts = _.assign(defaultOptions, opts)\n  validateContextObject(ctx);\n  scope.scopes = [ctx || {}]\n  return scope\n}\n","import * as _ from './util/underscore.js';\n\nfunction shouldTrimLeft (token, inRaw, options) {\n  if (inRaw) return false\n  if (token.type === 'tag') return token.trim_left || options.trim_tag_left\n  if (token.type === 'value') return token.trim_left || options.trim_value_left\n}\n\nfunction shouldTrimRight (token, inRaw, options) {\n  if (inRaw) return false\n  if (token.type === 'tag') return token.trim_right || options.trim_tag_right\n  if (token.type === 'value') return token.trim_right || options.trim_value_right\n}\n\nfunction trimLeft (token, greedy) {\n  if (!token || token.type !== 'html') return\n\n  var rLeft = greedy ? /\\s+$/g : /[\\t\\r ]*$/g\n  token.value = token.value.replace(rLeft, '')\n}\n\nfunction trimRight (token, greedy) {\n  if (!token || token.type !== 'html') return\n\n  var rRight = greedy ? /^\\s+/g : /^[\\t\\r ]*\\n?/g\n  token.value = token.value.replace(rRight, '')\n}\n\nexport default function whiteSpaceCtrl(tokens, options) {\n  options = _.assign({ greedy: true }, options)\n  var inRaw = false\n\n  tokens.forEach((token, i) => {\n    if (shouldTrimLeft(token, inRaw, options)) {\n      trimLeft(tokens[i - 1], options.greedy)\n    }\n\n    if (token.type === 'tag' && token.name === 'raw') inRaw = true\n    if (token.type === 'tag' && token.name === 'endraw') inRaw = false\n\n    if (shouldTrimRight(token, inRaw, options)) {\n      trimRight(tokens[i + 1], options.greedy)\n    }\n  })\n}\n","import * as lexical from './lexical.js';\nimport { TokenizationError } from './util/error.js';\nimport * as _ from './util/underscore.js';\nimport whiteSpaceCtrl from './whitespace-ctrl.js';\nimport assert from './util/assert.js';\n\nexport function parse (input, file, options) {\n  assert(_.isString(input), `illegal input; \"${'' + input}\"`);\n\n  var rLiquid = /({%-?([\\s\\S]*?)-?%})|({{-?([\\s\\S]*?)-?}})/g\n  var currIndent = 0\n  var lineNumber = LineNumber(input)\n  var lastMatchEnd = 0\n  var tokens = []\n\n  for (var match; (match = rLiquid.exec(input)); lastMatchEnd = rLiquid.lastIndex) {\n    if (match.index > lastMatchEnd) {\n      tokens.push(parseHTMLToken(lastMatchEnd, match.index))\n    }\n    tokens.push(match[1]\n      ? parseTagToken(match[1], match[2].trim(), match.index)\n      : parseValueToken(match[3], match[4].trim(), match.index))\n  }\n  if (input.length > lastMatchEnd) {\n    tokens.push(parseHTMLToken(lastMatchEnd, input.length))\n  }\n  whiteSpaceCtrl(tokens, options)\n  return tokens\n\n  function parseTagToken (raw, value, pos) {\n    var match = value.match(lexical.tagLine)\n    var token = {\n      type: 'tag',\n      indent: currIndent,\n      line: lineNumber.get(pos),\n      trim_left: raw.slice(0, 3) === '{%-',\n      trim_right: raw.slice(-3) === '-%}',\n      raw,\n      value,\n      input,\n      file\n    }\n    if (!match) {\n      throw new TokenizationError(`illegal tag syntax`, token)\n    }\n    token.name = match[1]\n    token.args = match[2]\n    return token\n  }\n\n  function parseValueToken (raw, value, pos) {\n    return {\n      type: 'value',\n      line: lineNumber.get(pos),\n      trim_left: raw.slice(0, 3) === '{{-',\n      trim_right: raw.slice(-3) === '-}}',\n      raw,\n      value,\n      input,\n      file\n    }\n  }\n\n  function parseHTMLToken (begin, end) {\n    var htmlFragment = input.slice(begin, end)\n    currIndent = _.last((htmlFragment).split('\\n')).length\n\n    return {\n      type: 'html',\n      raw: htmlFragment,\n      value: htmlFragment\n    }\n  }\n}\n\nfunction LineNumber (html) {\n  var parsedLinesCount = 0\n  var lastMatchBegin = -1\n\n  return {\n    get: function (pos) {\n      var lines = html.slice(lastMatchBegin + 1, pos).split('\\n')\n      parsedLinesCount += lines.length - 1\n      lastMatchBegin = pos\n      return parsedLinesCount + 1\n    }\n  }\n}\n","import fs from 'fs';\n\nexport function readFileAsync (filepath) {\n  return new Promise(function (resolve, reject) {\n    fs.readFile(filepath, 'utf8', function (err, content) {\n      err ? reject(err) : resolve(content)\n    })\n  })\n}\n\nexport function statFileAsync (path) {\n  return new Promise(function (resolve, reject) {\n    fs.stat(path, (err, stat) => err ? reject(err) : resolve(stat))\n  })\n}\n","// Copyright 2014 Simon Lydell\r\n// X11 (“MIT”) Licensed. (See LICENSE.)\r\n\r\nvoid (function(root, factory) {\r\n  if (typeof define === \"function\" && define.amd) {\r\n    define(factory)\r\n  } else if (typeof exports === \"object\") {\r\n    module.exports = factory()\r\n  } else {\r\n    root.resolveUrl = factory()\r\n  }\r\n}(this, function() {\r\n\r\n  function resolveUrl(/* ...urls */) {\r\n    var numUrls = arguments.length\r\n\r\n    if (numUrls === 0) {\r\n      throw new Error(\"resolveUrl requires at least one argument; got none.\")\r\n    }\r\n\r\n    var base = document.createElement(\"base\")\r\n    base.href = arguments[0]\r\n\r\n    if (numUrls === 1) {\r\n      return base.href\r\n    }\r\n\r\n    var head = document.getElementsByTagName(\"head\")[0]\r\n    head.insertBefore(base, head.firstChild)\r\n\r\n    var a = document.createElement(\"a\")\r\n    var resolved\r\n\r\n    for (var index = 1; index < numUrls; index++) {\r\n      a.href = arguments[index]\r\n      resolved = a.href\r\n      base.href = resolved\r\n    }\r\n\r\n    head.removeChild(base)\r\n\r\n    return resolved\r\n  }\r\n\r\n  return resolveUrl\r\n\r\n}));\r\n","import { default as resolveUrl } from 'resolve-url';\n\nconst splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^/]+?|)(\\.[^./]*|))(?:[/]*)$/\nconst urlRe = /^(?:\\w+:)?\\/\\/([^\\s.]+\\.\\S{2}|localhost[:?\\d]*)\\S*$/\n\n// https://github.com/jinder/path/blob/master/path.js#L567\nexport function extname(path) {\n  return splitPathRe.exec(path).slice(1)[3]\n}\n\n// https://www.npmjs.com/package/is-url\nexport function valid(path) {\n  return urlRe.test(path)\n}\n\nexport function resolve(root, path) {\n  if (Object.prototype.toString.call(root) === '[object Array]') {\n    root = root[0]\n  }\n  if (root && root.charAt(root.length - 1) !== '/') {\n    root += '/'\n  }\n  return resolveUrl(root, path)\n}\n","export default class SafeObject {\n  constructor(comparisonId) {\n    if (undefined !== comparisonId) {\n      Object.defineProperty(this, SafeObject.COMPARISON_KEY, {\n        enumerable: false,\n        value:      comparisonId,\n      });\n    }\n    else {\n      // noop. must inherit\n    }\n  }\n}\n\nSafeObject.COMPARISON_KEY = '_liquid_comparison_id';\n","import SafeObject from './safe-object.js';\n\nconst isNullOrUndefined = value => null === value || undefined === value;\n\nconst comparingEmpty = (EMPTY, ...vars) => !!vars.find(v => v === EMPTY);\n\nconst createOperator = (EMPTY, handler) => (l, r) => {\n  // HACK: if comparing against EMPTY const we'll stringify first\n  //       because both [] == empty and '' == empty, but i don't think\n  //       {} == empty.  since [].toString() is converted to '' this works\n  // NOTE: in liquid, you can do {% if Product == Product %} but in js you can't.\n  //       any object requiring that kind of comparison should extend SafeObject\n  //       and provide a comparison id that can uniquely identify that object\n  if (l instanceof SafeObject) {\n    l = l[SafeObject.COMPARISON_KEY];\n  }\n  if (r instanceof SafeObject) {\n    r = r[SafeObject.COMPARISON_KEY];\n  }\n  if (comparingEmpty(EMPTY, l, r)) {\n    // if comparing to empty, null or undefined is evaluated as an empty string\n    l = isNullOrUndefined(l) ? '' : '' + l;\n    r = isNullOrUndefined(r) ? '' : '' + r;\n  }\n  return handler(l, r);\n};\n\nexport default function (isTruthy, EMPTY) {\n  let _createOperator = createOperator.bind(null, EMPTY);\n  return {\n    '==': _createOperator((l, r) => l === r),\n\n    '!=': _createOperator((l, r) => l !== r),\n\n    '>': _createOperator((l, r) => l !== null && r !== null && l > r),\n\n    '<': _createOperator((l, r) => l !== null && r !== null && l < r),\n\n    '>=': _createOperator((l, r) => l !== null && r !== null && l >= r),\n\n    '<=': _createOperator((l, r) => l !== null && r !== null && l <= r),\n\n    'contains': _createOperator((l, r) => {\n      if (!l) return false\n      if (typeof l.indexOf !== 'function') return false\n      return l.indexOf(r) > -1\n    }),\n\n    'and': _createOperator((l, r) => isTruthy(l) && isTruthy(r)),\n\n    'or': _createOperator((l, r) => isTruthy(l) || isTruthy(r)),\n  }\n}\n","import * as lexical from './lexical.js';\nimport createOperators from './operators.js';\nimport assert from './util/assert.js';\n\nexport const operators = createOperators(isTruthy, lexical.EMPTY);\n\nexport function evalExp (exp, scope) {\n  assert(scope, 'unable to evalExp: scope undefined')\n  var operatorREs = lexical.operators\n  var match\n  for (var i = 0; i < operatorREs.length; i++) {\n    var operatorRE = operatorREs[i]\n    var expRE = new RegExp(`^(${lexical.quoteBalanced.source})(${operatorRE.source})(${lexical.quoteBalanced.source})$`)\n    if ((match = exp.match(expRE))) {\n      return Promise.all([\n        evalExp(match[1], scope),\n        evalExp(match[3], scope),\n      ]).then(results => {\n        let l = results[0];\n        let r = results[1];\n        var op = operators[match[2].trim()]\n        // console.log('evalExp', l, op, r);\n        return op(l, r);\n      });\n    }\n  }\n\n  if ((match = exp.match(lexical.rangeLine))) {\n    return Promise.all([\n      evalValue(match[1], scope),\n      evalValue(match[2], scope),\n    ]).then(results => {\n      var low = results[0]\n      var high = results[1]\n      var range = []\n      for (var j = low; j <= high; j++) {\n        range.push(j)\n      }\n      return range\n    })\n  }\n  // need to support if this.boolean? is true\n  if (exp.substr(-1) === '?') {\n    exp = exp.substr(0, exp.length - 1);\n  }\n  return evalValue(exp, scope)\n}\n\n\nexport function evalValue (str, scope) {\n  str = str && str.trim()\n  if (!str) return Promise.resolve(undefined)\n  if (lexical.isLiteral(str)) {\n    // console.log('evalValue isLiteral', str);\n    return Promise.resolve(lexical.parseLiteral(str))\n  }\n  if (lexical.isVariable(str)) {\n    // console.log('evalValue isVariable', str, scope);\n    return scope.get(str);\n  }\n  throw new TypeError(`cannot eval '${str}' as value`)\n}\n\nexport function isTruthy (val) {\n  return !isFalsy(val)\n}\n\nexport function isFalsy (val) {\n  return val === false || undefined === val || val === null || lexical.EMPTY === val || (typeof val === 'string' && val.length === 0);\n}\n","\n/*\n * Call functions in serial until someone resolved.\n * @param {Array} iterable the array to iterate with.\n * @param {Array} iteratee returns a new promise.\n * The iteratee is invoked with three arguments: (value, index, iterable).\n */\nexport function anySeries (iterable, iteratee) {\n  var ret = Promise.reject(new Error('init'))\n  iterable.forEach(function (item, idx) {\n    ret = ret.catch(e => iteratee(item, idx, iterable))\n  })\n  return ret\n}\n\n/*\n * Call functions in serial until someone rejected.\n * @param {Array} iterable the array to iterate with.\n * @param {Array} iteratee returns a new promise.\n * The iteratee is invoked with three arguments: (value, index, iterable).\n */\nexport function mapSeries (iterable, iteratee) {\n  var ret = Promise.resolve('init')\n  var result = []\n  iterable.forEach(function (item, idx) {\n    ret = ret\n      .then(() => iteratee(item, idx, iterable))\n      .then(x => result.push(x))\n  })\n  return ret.then(() => result)\n}\n\n/*\n * Call functions in serial until someone resolved; skip rest of series\n * @param {Array} iterable the array to iterate with.\n * @param {Array} iteratee returns a new promise.\n * The iteratee is invoked with three arguments: (value, index, iterable).\n */\nexport function firstSeries (iterable, iteratee, fallbackFn) {\n  var winner;\n  return iterable.reduce((promise, item) => {\n    return promise.then(() => {\n      if (winner) {\n        return Promise.resolve(winner)\n      }\n      else {\n        return iteratee(item).then(found => {\n          winner = found\n          return winner\n        }).catch(err => {\n          if (err instanceof Error) {\n            throw err\n          }\n          else {\n            // noop. swallow promises rejected with non-errors\n          }\n        })\n      }\n    })\n  }, Promise.resolve()).then(() => {\n    if (undefined !== winner) {\n      return winner\n    }\n    else if (fallbackFn) {\n      return fallbackFn()\n    }\n    else {\n      return undefined\n    }\n  })\n}\n","import * as Syntax from './syntax.js';\nimport { EMPTY } from './lexical.js';\nimport { mapSeries } from './util/promise.js';\nimport { RenderBreakError, RenderError } from './util/error.js';\nimport assert from './util/assert.js';\n\nvar render = {\n\n  renderTemplates: function (templates, scope) {\n    assert(scope, 'unable to evalTemplates: scope undefined')\n\n    var html = ''\n    return mapSeries(templates, (tpl) => {\n      return renderTemplate.call(this, tpl)\n        .then(partial => (html += partial))\n        .catch(e => {\n          if (e instanceof RenderBreakError) {\n            e.resolvedHTML = html\n            throw e\n          }\n          throw new RenderError(e, tpl)\n        })\n    }).then(() => html)\n\n    function renderTemplate (template) {\n      if (template.type === 'tag') {\n        return this.renderTag(template, scope)\n          .then(partial => partial === undefined ? '' : partial)\n      } else if (template.type === 'value') {\n        return this.evalValue(template, scope)\n          .then(partial => partial === undefined ? '' : stringify(partial))\n      } else { // template.type === 'html'\n        return Promise.resolve(template.value)\n      }\n    }\n  },\n\n  renderTag: function (template, scope) {\n    if (template.name === 'continue') {\n      return Promise.reject(new RenderBreakError('continue'))\n    }\n    if (template.name === 'break') {\n      return Promise.reject(new RenderBreakError('break'))\n    }\n    return template.render(scope)\n  },\n\n  evalValue: function (template, scope) {\n    assert(scope, 'unable to evalValue: scope undefined')\n    try {\n      // console.log('template.filters', template.filters)\n      return Syntax.evalExp(template.initial, scope).then(initialValue => {\n        // console.log('template.filters; initialValue', initialValue);\n        return template.filters.reduce((promise, filter) => {\n          return promise.then(prev => {\n            return filter.render(prev, scope).then(next => {\n              // console.log('evalValue', {prev,next})\n              return next;\n            });\n          })\n        }, Promise.resolve(initialValue));\n      });\n    }\n    catch (err) {\n      return Promise.reject(err);\n    }\n  },\n}\n\nfunction stringify (val) {\n  if (typeof val === 'string') {\n    return val;\n  }\n  else if (null === val || undefined === val || EMPTY === val) {\n    return '';\n  }\n  else {\n    return JSON.stringify(val);\n  }\n}\n\nexport default function() {\n  var instance = Object.create(render)\n  return instance\n}\n\n","import * as lexical from './lexical.js';\nimport * as Syntax from './syntax.js';\nimport assert from './util/assert.js';\n\nfunction hash (markup, scope) {\n  var keys = []\n  var vals = []\n  var obj = {}\n  var match\n  lexical.hashCapture.lastIndex = 0\n  while ((match = lexical.hashCapture.exec(markup))) {\n    var k = match[1]\n    var v = match[2]\n    keys.push(k)\n    vals.push(Syntax.evalValue(v, scope))\n  }\n  return Promise.all(vals).then(results => {\n    results.forEach((v, i) => {\n      var k = keys[i];\n      obj[k] = v;\n    })\n    return obj\n  })\n}\n\nexport default function () {\n  var tagImpls = {}\n\n  var _tagInstance = {\n    render: function (scope) {\n      return hash(this.token.args, scope).then(obj => {\n        var impl = this.tagImpl\n        if (typeof impl.render !== 'function') {\n          return Promise.resolve('')\n        }\n        return impl.render(scope, obj)\n      })\n    },\n    parse: function (token, tokens) {\n      this.type = 'tag'\n      this.token = token\n      this.name = token.name\n\n      var tagImpl = tagImpls[this.name]\n      assert(tagImpl, `tag ${this.name} not found`)\n      this.tagImpl = Object.create(tagImpl)\n      if (this.tagImpl.parse) {\n        this.tagImpl.parse(token, tokens)\n      }\n    }\n  }\n\n  function register (name, tag) {\n    tagImpls[name] = tag\n  }\n\n  function construct (token, tokens) {\n    var instance = Object.create(_tagInstance)\n    instance.parse(token, tokens)\n    return instance\n  }\n\n  function clear () {\n    tagImpls = {}\n  }\n\n  return {\n    construct,\n    register,\n    clear\n  }\n}\n","import * as lexical from './lexical.js';\nimport * as Syntax from './syntax.js';\nimport assert from './util/assert.js';\nimport * as _ from './util/underscore.js';\n\nvar valueRE = new RegExp(`${lexical.value.source}`, 'g')\n\nexport default function(options) {\n  options = _.assign({}, options)\n  var filters = {}\n\n  var _filterInstance = {\n    render: function (output, scope) {\n      return Promise.all(this.args.map(arg => Syntax.evalValue(arg, scope))).then(args => {\n        args.unshift(output)\n        return this.filter.apply(scope, args);\n      });\n    },\n    parse: function (str) {\n      var match = lexical.filterLine.exec(str)\n      assert(match, 'illegal filter: ' + str)\n\n      var name = match[1]\n      var argList = match[2] || ''\n      var filter = filters[name]\n      if (typeof filter !== 'function') {\n        if (options.strict_filters) {\n          throw new TypeError(`undefined filter: ${name}`)\n        }\n        this.name = name\n        this.filter = x => x\n        this.args = []\n        return this\n      }\n\n      var args = []\n      while ((match = valueRE.exec(argList.trim()))) {\n        var v = match[0]\n        var re = new RegExp(`${v}\\\\s*:`, 'g')\n        var keyMatch = re.exec(match.input);\n        var currentMatchIsKey = keyMatch && keyMatch.index === match.index;\n        currentMatchIsKey ? args.push(`'${v}'`) : args.push(v)\n      }\n\n      this.name = name\n      this.filter = filter\n      this.args = args\n\n      return this\n    }\n  }\n\n  function construct (str) {\n    var instance = Object.create(_filterInstance)\n    return instance.parse(str)\n  }\n\n  function register (name, filter) {\n    filters[name] = filter\n  }\n\n  function clear () {\n    filters = {}\n  }\n\n  return {\n    construct, register, clear\n  }\n}\n","import * as lexical from './lexical.js';\nimport { ParseError } from './util/error.js';\nimport assert from './util/assert.js';\n\nexport default function (Tag, Filter) {\n  var stream = {\n    init: function (tokens) {\n      this.tokens = tokens\n      this.handlers = {}\n      return this\n    },\n    on: function (name, cb) {\n      this.handlers[name] = cb\n      return this\n    },\n    trigger: function (event, arg) {\n      var h = this.handlers[event]\n      if (typeof h === 'function') {\n        h(arg)\n        return true\n      }\n    },\n    start: function () {\n      this.trigger('start')\n      var token\n      while (!this.stopRequested && (token = this.tokens.shift())) {\n        if (this.trigger('token', token)) continue\n        if (token.type === 'tag' &&\n            this.trigger(`tag:${token.name}`, token)) {\n          continue\n        }\n        var template = parseToken(token, this.tokens)\n        this.trigger('template', template)\n      }\n      if (!this.stopRequested) this.trigger('end')\n      return this\n    },\n    stop: function () {\n      this.stopRequested = true\n      return this\n    }\n  }\n\n  function parse (tokens) {\n    var token\n    var templates = []\n    while ((token = tokens.shift())) {\n      templates.push(parseToken(token, tokens))\n    }\n    return templates\n  }\n\n  function parseToken (token, tokens) {\n    try {\n      var tpl = null\n      if (token.type === 'tag') {\n        tpl = parseTag(token, tokens)\n      } else if (token.type === 'value') {\n        tpl = parseValue(token.value)\n      } else { // token.type === 'html'\n        tpl = token\n      }\n      tpl.token = token\n      return tpl\n    } catch (e) {\n      throw new ParseError(e, token)\n    }\n  }\n\n  function parseTag (token, tokens) {\n    if (token.name === 'continue' || token.name === 'break') return token\n    return Tag.construct(token, tokens)\n  }\n\n  function parseValue (str) {\n    var match = lexical.matchValue(str)\n    assert(match, `illegal value string: ${str}`)\n\n    var initial = match[0]\n    str = str.substr(match.index + match[0].length)\n\n    var filters = []\n    while ((match = lexical.filter.exec(str))) {\n      filters.push([match[0].trim()])\n    }\n\n    return {\n      type: 'value',\n      initial: initial,\n      filters: filters.map(str => Filter.construct(str))\n    }\n  }\n\n  function parseStream (tokens) {\n    var s = Object.create(stream)\n    return s.init(tokens)\n  }\n\n  return {\n    parse,\n    parseTag,\n    parseStream,\n    parseValue\n  }\n}\n","import { evalValue } from '../syntax.js';\nimport assert from '../util/assert.js';\nimport * as lexical from '../lexical.js';\n\nconst re = new RegExp(`(${lexical.identifier.source})\\\\s*=(.*)`)\n\nexport default function(liquid) {\n  liquid.registerTag('assign', {\n    parse: function (token) {\n      var match = token.args.match(re)\n      assert(match, `illegal token ${token.raw}`)\n      this.key = match[1]\n      this.value = match[2]\n    },\n    render: function (scope) {\n      return evalValue(this.value, scope).then(value => {\n        scope.set(this.key, value)\n        return ''\n      })\n    }\n  })\n}\n","import assert from '../util/assert.js';\n\nimport * as lexical from '../lexical.js';\nconst re = new RegExp(`(${lexical.identifier.source})`)\n\nexport default function(liquid) {\n  liquid.registerTag('capture', {\n    parse: function (tagToken, remainTokens) {\n      var match = tagToken.args.match(re)\n      assert(match, `${tagToken.args} not valid identifier`)\n\n      this.variable = match[1]\n      this.templates = []\n\n      var stream = liquid.parser.parseStream(remainTokens)\n      stream.on('tag:endcapture', token => stream.stop())\n        .on('template', tpl => this.templates.push(tpl))\n        .on('end', x => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n      stream.start()\n    },\n    render: function (scope, hash) {\n      return liquid.renderer.renderTemplates(this.templates, scope)\n        .then((html) => {\n          scope.set(this.variable, html)\n        })\n    }\n  })\n}\n","import { evalExp } from '../syntax.js';\nimport { firstSeries } from '../util/promise.js';\n\nconst evaluateBranch = (val, cond) => {\n  return Promise.all([ val, cond ]).then(results => {\n    return results[0] === results[1]\n  })\n}\n\nexport default function(liquid) {\n  liquid.registerTag('case', {\n\n    parse: function (tagToken, remainTokens) {\n      this.cond = tagToken.args\n      this.cases = []\n      this.elseTemplates = []\n\n      var p = []\n      var stream = liquid.parser.parseStream(remainTokens)\n        .on('tag:when', token => {\n          this.cases.push({\n            val: token.args,\n            templates: p = []\n          })\n        })\n        .on('tag:else', () => (p = this.elseTemplates))\n        .on('tag:endcase', token => stream.stop())\n        .on('template', tpl => p.push(tpl))\n        .on('end', x => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n\n      stream.start()\n    },\n\n    render: function (scope, hash) {\n      return firstSeries(this.cases, branch => {\n        return new Promise((resolve, reject) => {\n          evaluateBranch(evalExp(branch.val, scope), evalExp(this.cond, scope)).then(found => {\n            if (found) {\n              resolve(liquid.renderer.renderTemplates(branch.templates, scope))\n            }\n            else {\n              reject()\n            }\n          })\n        })\n      }, () => liquid.renderer.renderTemplates(this.elseTemplates, scope))\n    }\n  })\n}\n","export default function(liquid) {\n  liquid.registerTag('comment', {\n    parse: function (tagToken, remainTokens) {\n      var stream = liquid.parser.parseStream(remainTokens)\n      stream\n        .on('token', token => {\n          if (token.name === 'endcomment') stream.stop()\n        })\n        .on('end', x => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n      stream.start()\n    }\n  })\n}\n","import { evalValue } from '../syntax.js';\nimport assert from '../util/assert.js';\n\nimport * as lexical from '../lexical.js';\nconst groupRE = new RegExp(`^(?:(${lexical.value.source})\\\\s*:\\\\s*)?(.*)$`)\nconst candidatesRE = new RegExp(lexical.value.source, 'g')\n\nexport default function(liquid) {\n  liquid.registerTag('cycle', {\n\n    parse: function (tagToken, remainTokens) {\n      var match = groupRE.exec(tagToken.args)\n      assert(match, `illegal tag: ${tagToken.raw}`)\n\n      this.group = match[1] || ''\n      var candidates = match[2]\n\n      this.candidates = []\n\n      while ((match = candidatesRE.exec(candidates))) {\n        this.candidates.push(match[0])\n      }\n      assert(this.candidates.length, `empty candidates: ${tagToken.raw}`)\n    },\n\n    render: function (scope, hash) {\n      return evalValue(this.group, scope).then(group => {\n        var fingerprint = `cycle:${group}:` + this.candidates.join(',')\n\n        var groups = scope.opts.groups = scope.opts.groups || {}\n        var idx = groups[fingerprint]\n\n        if (idx === undefined) {\n          idx = groups[fingerprint] = 0\n        }\n\n        var candidate = this.candidates[idx]\n        idx = (idx + 1) % this.candidates.length\n        groups[fingerprint] = idx\n        return evalValue(candidate, scope)\n      })\n    }\n  })\n}\n","import Liquid from '../main.js';\nimport assert from '../util/assert.js';\n\nimport * as lexical from '../lexical.js';\n\nexport default function(liquid) {\n  liquid.registerTag('decrement', {\n    parse: function (token) {\n      var match = token.args.match(lexical.identifier)\n      assert(match, `illegal identifier ${token.args}`)\n      this.variable = match[0]\n    },\n    render: function (scope, hash) {\n      return scope.get(this.variable).then(v => {\n        if (typeof v !== 'number') v = 0\n        scope.set(this.variable, v - 1)\n      });\n    }\n  })\n}\n","import { isTruthy, evalExp } from '../syntax.js';\nimport { mapSeries } from '../util/promise.js';\nimport * as _ from '../util/underscore.js';\nimport assert from '../util/assert.js';\nimport { RenderBreakError } from '../util/error.js';\nimport * as lexical from '../lexical.js';\n\nconst re = new RegExp(`^(${lexical.identifier.source})\\\\s+in\\\\s+` +\n    `(${lexical.value.source})` +\n    `(?:\\\\s+${lexical.hash.source})*` +\n    `(?:\\\\s+(reversed))?` +\n    `(?:\\\\s+${lexical.hash.source})*$`)\n\nexport default function(liquid) {\n  liquid.registerTag('for', {\n\n    parse: function (tagToken, remainTokens) {\n      var match = re.exec(tagToken.args)\n      assert(match, `illegal tag: ${tagToken.raw}`)\n      this.variable = match[1]\n      this.collection = match[2]\n      this.reversed = !!match[3]\n\n      this.templates = []\n      this.elseTemplates = []\n\n      var p\n      var stream = liquid.parser.parseStream(remainTokens)\n        .on('start', () => (p = this.templates))\n        .on('tag:else', () => (p = this.elseTemplates))\n        .on('tag:endfor', () => stream.stop())\n        .on('template', tpl => p.push(tpl))\n        .on('end', () => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n\n      stream.start()\n    },\n\n    render: function (scope, hash) {\n      return evalExp(this.collection, scope).then(collection => {\n        collection = collection || [];\n        if (!Array.isArray(collection)) {\n          if (_.isString(collection) && collection.length > 0) {\n            collection = [collection]\n          } else if (_.isObject(collection)) {\n            collection = Object.keys(collection).map(key => collection[key])\n          }\n        }\n        if (!Array.isArray(collection) || !collection.length) {\n          return liquid.renderer.renderTemplates(this.elseTemplates, scope)\n        }\n\n        var length = collection.length\n        var offset = hash.offset || 0\n        var limit = (hash.limit === undefined) ? collection.length : hash.limit\n\n        collection = collection.slice(offset, offset + limit)\n        if (this.reversed) collection.reverse()\n\n        var contexts = collection.map((item, i) => {\n          var ctx = {}\n          ctx[this.variable] = item\n          ctx.forloop = {\n            first: i === 0,\n            index: i + 1,\n            index0: i,\n            last: i === length - 1,\n            length: length,\n            rindex: length - i,\n            rindex0: length - i - 1\n          }\n          return ctx\n        })\n\n        var html = ''\n        return mapSeries(contexts, (context) => {\n          return Promise.resolve()\n            .then(() => scope.push(context))\n            .then(() => liquid.renderer.renderTemplates(this.templates, scope))\n            .then(partial => (html += partial))\n            .catch(e => {\n              if (e instanceof RenderBreakError) {\n                html += e.resolvedHTML\n                if (e.message === 'continue') return\n              }\n              throw e\n            })\n            .then(() => scope.pop())\n        }).catch((e) => {\n          if (e instanceof RenderBreakError && e.message === 'break') {\n            return\n          }\n          throw e\n        }).then(() => html)\n      })\n    }\n  })\n}\n","import { isTruthy, evalExp } from '../syntax.js';\nimport { firstSeries } from '../util/promise.js';\n\nexport default function(liquid) {\n  liquid.registerTag('if', {\n\n    parse: function (tagToken, remainTokens) {\n      this.branches = []\n      this.elseTemplates = []\n\n      var p\n      var stream = liquid.parser.parseStream(remainTokens)\n        .on('start', () => this.branches.push({\n          cond: tagToken.args,\n          templates: (p = [])\n        }))\n        .on('tag:elsif', token => {\n          this.branches.push({\n            cond: token.args,\n            templates: p = []\n          })\n        })\n        .on('tag:else', () => (p = this.elseTemplates))\n        .on('tag:endif', token => stream.stop())\n        .on('template', tpl => p.push(tpl))\n        .on('end', x => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n\n      stream.start()\n    },\n\n    render: function (scope, hash) {\n      return firstSeries(this.branches, branch => {\n        return new Promise((resolve, reject) => {\n          return evalExp(branch.cond, scope).then(cond => {\n            if (isTruthy(cond)) {\n              resolve(liquid.renderer.renderTemplates(branch.templates, scope))\n            }\n            else {\n              reject()\n            }\n          })\n        })\n      }, () => liquid.renderer.renderTemplates(this.elseTemplates, scope))\n    }\n  })\n}\n","import { evalValue } from '../syntax.js';\nimport assert from '../util/assert.js';\n\nimport * as lexical from '../lexical.js';\nconst withRE = new RegExp(`with\\\\s+(${lexical.value.source})`)\nconst staticFileRE = /\\S+/\n\nexport default function(liquid) {\n  liquid.registerTag('include', {\n    parse: function (token) {\n      var match = staticFileRE.exec(token.args)\n      if (match) {\n        this.staticValue = match[0]\n      }\n\n      match = lexical.value.exec(token.args)\n      if (match) {\n        this.value = match[0]\n      }\n\n      match = withRE.exec(token.args)\n      if (match) {\n        this.with = match[1]\n      }\n    },\n    render: function (scope, hash) {\n      return (scope.opts.dynamicPartials\n        ? evalValue(this.value, scope)\n        : Promise.resolve(this.staticValue)).then(filepath => {\n        assert(filepath, `cannot include with empty filename`)\n        var originBlocks = scope.opts.blocks\n        var originBlockMode = scope.opts.blockMode\n        scope.opts.blocks = {}\n        scope.opts.blockMode = 'output'\n\n        return (!this.with ? Promise.resolve() : evalValue(this.with, scope).then(result => {\n          hash[filepath] = result\n          return result\n        })).then(() => {\n          return liquid.getTemplate(filepath, scope.opts.root)\n            .then((templates) => {\n              scope.push(hash)\n              return liquid.renderer.renderTemplates(templates, scope)\n            })\n            .then((html) => {\n              scope.pop()\n              scope.opts.blocks = originBlocks\n              scope.opts.blockMode = originBlockMode\n              return html\n            })\n        })\n      })\n    }\n  })\n}\n","import assert from '../util/assert.js';\nimport * as lexical from '../lexical.js';\n\nexport default function(liquid) {\n  liquid.registerTag('increment', {\n    parse: function (token) {\n      var match = token.args.match(lexical.identifier)\n      assert(match, `illegal identifier ${token.args}`)\n      this.variable = match[0]\n    },\n    render: function (scope, hash) {\n      return scope.get(this.variable).then(v => {\n        if (typeof v !== 'number') v = 0\n        scope.set(this.variable, v + 1)\n      });\n    }\n  })\n}\n","import { evalValue } from '../syntax.js';\nimport assert from '../util/assert.js';\n\nimport * as lexical from '../lexical.js';\nconst staticFileRE = /\\S+/\n\n/*\n * blockMode:\n * * \"store\": store rendered html into blocks\n * * \"output\": output rendered html\n */\n\nexport default function(liquid) {\n  liquid.registerTag('layout', {\n    parse: function (token, remainTokens) {\n      var match = staticFileRE.exec(token.args)\n      if (match) {\n        this.staticLayout = match[0]\n      }\n\n      match = lexical.value.exec(token.args)\n      if (match) {\n        this.layout = match[0]\n      }\n\n      this.tpls = liquid.parser.parse(remainTokens)\n    },\n    render: function (scope, hash) {\n      return (scope.opts.dynamicPartials ? evalValue(this.layout, scope) : Promise.resolve(this.staticLayout)).then(layout => {\n        assert(layout, `cannot apply layout with empty filename`)\n\n        // render the remaining tokens immediately\n        scope.opts.blockMode = 'store'\n        return liquid.renderer.renderTemplates(this.tpls, scope)\n          .then(html => {\n            if (scope.opts.blocks[''] === undefined) {\n              scope.opts.blocks[''] = html\n            }\n            return liquid.getTemplate(layout, scope.opts.root)\n          })\n          .then(templates => {\n            // push the hash\n            scope.push(hash)\n            scope.opts.blockMode = 'output'\n            return liquid.renderer.renderTemplates(templates, scope)\n          })\n          // pop the hash\n          .then(partial => {\n            scope.pop()\n            return partial\n          })\n      })\n    }\n  })\n\n  liquid.registerTag('block', {\n    parse: function (token, remainTokens) {\n      var match = /\\w+/.exec(token.args)\n      this.block = match ? match[0] : ''\n\n      this.tpls = []\n      var stream = liquid.parser.parseStream(remainTokens)\n        .on('tag:endblock', () => stream.stop())\n        .on('template', tpl => this.tpls.push(tpl))\n        .on('end', () => {\n          throw new Error(`tag ${token.raw} not closed`)\n        })\n      stream.start()\n    },\n    render: function (scope) {\n      return Promise.resolve(scope.opts.blocks[this.block])\n        .then(html => html === undefined\n          // render default block\n          ? liquid.renderer.renderTemplates(this.tpls, scope)\n          // use child-defined block\n          : html)\n        .then(html => {\n          if (scope.opts.blockMode === 'store') {\n            scope.opts.blocks[this.block] = html\n            return ''\n          }\n          return html\n        })\n    }\n  })\n}\n","\nexport default function(liquid) {\n  liquid.registerTag('raw', {\n    parse: function (tagToken, remainTokens) {\n      this.tokens = []\n\n      var stream = liquid.parser.parseStream(remainTokens)\n      stream\n        .on('token', token => {\n          if (token.name === 'endraw') stream.stop()\n          else this.tokens.push(token)\n        })\n        .on('end', x => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n      stream.start()\n    },\n    render: function (scope, hash) {\n      var tokens = this.tokens.map(token => token.raw).join('')\n      return Promise.resolve(tokens)\n    }\n  })\n}\n","import { evalExp } from '../syntax.js';\nimport { mapSeries } from '../util/promise.js';\nimport assert from '../util/assert.js';\nimport * as lexical from '../lexical.js';\nconst re = new RegExp(`^(${lexical.identifier.source})\\\\s+in\\\\s+` +\n  `(${lexical.value.source})` +\n  `(?:\\\\s+${lexical.hash.source})*$`)\n\nexport default function(liquid) {\n  liquid.registerTag('tablerow', {\n\n    parse: function (tagToken, remainTokens) {\n      var match = re.exec(tagToken.args)\n      assert(match, `illegal tag: ${tagToken.raw}`)\n\n      this.variable = match[1]\n      this.collection = match[2]\n      this.templates = []\n\n      var p\n      var stream = liquid.parser.parseStream(remainTokens)\n        .on('start', () => (p = this.templates))\n        .on('tag:endtablerow', token => stream.stop())\n        .on('template', tpl => p.push(tpl))\n        .on('end', () => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n\n      stream.start()\n    },\n\n    render: function (scope, hash) {\n      return evalExp(this.collection, scope).then(collection => {\n        collection = collection || []\n        var html = '<table>'\n        var offset = hash.offset || 0\n        var limit = (hash.limit === undefined) ? collection.length : hash.limit\n\n        var cols = hash.cols\n        var row\n        var col\n        if (!cols) throw new Error(`illegal cols: ${cols}`)\n\n        // build array of arguments to pass to sequential promises...\n        collection = collection.slice(offset, offset + limit)\n        var contexts = []\n        collection.some((item, i) => {\n          var ctx = {}\n          ctx[this.variable] = item\n          contexts.push(ctx)\n        })\n\n        return mapSeries(contexts,\n          (context, idx) => {\n            row = Math.floor(idx / cols) + 1\n            col = (idx % cols) + 1\n            if (col === 1) {\n              if (row !== 1) {\n                html += '</tr>'\n              }\n              html += `<tr class=\"row${row}\">`\n            }\n\n            html += `<td class=\"col${col}\">`\n            scope.push(context)\n            return liquid.renderer\n              .renderTemplates(this.templates, scope)\n              .then((partial) => {\n                scope.pop(context)\n                html += partial\n                html += '</td>'\n                return html\n              })\n          })\n          .then(() => {\n            if (row > 0) {\n              html += '</tr>'\n            }\n            html += '</table>'\n            return html\n          })\n      })\n    }\n  })\n}\n","import { isFalsy, evalExp } from '../syntax.js';\n\n\nexport default function(liquid) {\n  liquid.registerTag('unless', {\n    parse: function (tagToken, remainTokens) {\n      this.templates = []\n      this.elseTemplates = []\n      var p\n      var stream = liquid.parser.parseStream(remainTokens)\n        .on('start', x => {\n          p = this.templates\n          this.cond = tagToken.args\n        })\n        .on('tag:else', () => (p = this.elseTemplates))\n        .on('tag:endunless', token => stream.stop())\n        .on('template', tpl => p.push(tpl))\n        .on('end', x => {\n          throw new Error(`tag ${tagToken.raw} not closed`)\n        })\n\n      stream.start()\n    },\n\n    render: function (scope, hash) {\n      return evalExp(this.cond, scope).then(cond => {\n        return isFalsy(cond)\n          ? liquid.renderer.renderTemplates(this.templates, scope)\n          : liquid.renderer.renderTemplates(this.elseTemplates, scope)\n      })\n    }\n  })\n}\n","import tag_assign from './assign.js';\nimport tag_capture from './capture.js';\nimport tag_case from './case.js';\nimport tag_comment from './comment.js';\nimport tag_cycle from './cycle.js';\nimport tag_decrement from './decrement.js';\nimport tag_for from './for.js';\nimport tag_if from './if.js';\nimport tag_include from './include.js';\nimport tag_increment from './increment.js';\nimport tag_layout from './layout.js';\nimport tag_raw from './raw.js';\nimport tag_tablerow from './tablerow.js';\nimport tag_unless from './unless.js';\n\nexport default function(engine) {\n  [\n    tag_assign,\n    tag_capture,\n    tag_case,\n    tag_comment,\n    tag_cycle,\n    tag_decrement,\n    tag_for,\n    tag_if,\n    tag_include,\n    tag_increment,\n    tag_layout,\n    tag_raw,\n    tag_tablerow,\n    tag_unless,\n  ].forEach(registerTag => registerTag(engine));\n}\n","var monthNames = [\n  'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August',\n  'September', 'October', 'November', 'December'\n]\nvar monthNamesShort = [\n  'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct',\n  'Nov', 'Dec'\n]\nvar dayNames = [\n  'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n]\nvar dayNamesShort = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\nvar suffixes = {\n  1: 'st',\n  2: 'nd',\n  3: 'rd',\n  'default': 'th'\n}\n\n// prototype extensions\nvar _date = {\n  daysInMonth: function (d) {\n    var feb = _date.isLeapYear(d) ? 29 : 28\n    return [31, feb, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n  },\n\n  getDayOfYear: function (d) {\n    var num = 0\n    for (var i = 0; i < d.getMonth(); ++i) {\n      num += _date.daysInMonth(d)[i]\n    }\n    return num + d.getDate()\n  },\n\n  // Startday is an integer of which day to start the week measuring from\n  // TODO: that comment was retarted. fix it.\n  getWeekOfYear: function (d, startDay) {\n    // Skip to startDay of this week\n    var now = this.getDayOfYear(d) + (startDay - d.getDay())\n    // Find the first startDay of the year\n    var jan1 = new Date(d.getFullYear(), 0, 1)\n    var then = (7 - jan1.getDay() + startDay)\n    return _number.pad(Math.floor((now - then) / 7) + 1, 2)\n  },\n\n  isLeapYear: function (d) {\n    var year = d.getFullYear()\n    return !!((year & 3) === 0 && (year % 100 || (year % 400 === 0 && year)))\n  },\n\n  getSuffix: function (d) {\n    var str = d.getDate().toString()\n    var index = parseInt(str.slice(-1))\n    return suffixes[index] || suffixes['default']\n  },\n\n  century: function (d) {\n    return parseInt(d.getFullYear().toString().substring(0, 2), 10)\n  }\n}\n\nvar _number = {\n  pad: function (value, size, ch) {\n    if (!ch) ch = '0'\n    var result = value.toString()\n    var pad = size - result.length\n\n    while (pad-- > 0) {\n      result = ch + result\n    }\n\n    return result\n  }\n}\n\nvar formatCodes = {\n  a: function (d) {\n    return dayNamesShort[d.getDay()]\n  },\n  A: function (d) {\n    return dayNames[d.getDay()]\n  },\n  b: function (d) {\n    return monthNamesShort[d.getMonth()]\n  },\n  B: function (d) {\n    return monthNames[d.getMonth()]\n  },\n  c: function (d) {\n    return d.toLocaleString()\n  },\n  C: function (d) {\n    return _date.century(d)\n  },\n  d: function (d) {\n    return _number.pad(d.getDate(), 2)\n  },\n  e: function (d) {\n    return _number.pad(d.getDate(), 2, ' ')\n  },\n  H: function (d) {\n    return _number.pad(d.getHours(), 2)\n  },\n  I: function (d) {\n    return _number.pad(d.getHours() % 12 || 12, 2)\n  },\n  j: function (d) {\n    return _number.pad(_date.getDayOfYear(d), 3)\n  },\n  k: function (d) {\n    return _number.pad(d.getHours(), 2, ' ')\n  },\n  l: function (d) {\n    return _number.pad(d.getHours() % 12 || 12, 2, ' ')\n  },\n  L: function (d) {\n    return _number.pad(d.getMilliseconds(), 3)\n  },\n  m: function (d) {\n    return _number.pad(d.getMonth() + 1, 2)\n  },\n  M: function (d) {\n    return _number.pad(d.getMinutes(), 2)\n  },\n  p: function (d) {\n    return (d.getHours() < 12 ? 'AM' : 'PM')\n  },\n  P: function (d) {\n    return (d.getHours() < 12 ? 'am' : 'pm')\n  },\n  q: function (d) {\n    return _date.getSuffix(d)\n  },\n  s: function (d) {\n    return Math.round(d.valueOf() / 1000)\n  },\n  S: function (d) {\n    return _number.pad(d.getSeconds(), 2)\n  },\n  u: function (d) {\n    return d.getDay() || 7\n  },\n  U: function (d) {\n    return _date.getWeekOfYear(d, 0)\n  },\n  w: function (d) {\n    return d.getDay()\n  },\n  W: function (d) {\n    return _date.getWeekOfYear(d, 1)\n  },\n  x: function (d) {\n    return d.toLocaleDateString()\n  },\n  X: function (d) {\n    return d.toLocaleTimeString()\n  },\n  y: function (d) {\n    return d.getFullYear().toString().substring(2, 4)\n  },\n  Y: function (d) {\n    return d.getFullYear()\n  },\n  z: function (d) {\n    var tz = d.getTimezoneOffset() / 60 * 100\n    return (tz > 0 ? '-' : '+') + _number.pad(Math.abs(tz), 4)\n  },\n  '%': function () {\n    return '%'\n  }\n}\nformatCodes.h = formatCodes.b\nformatCodes.N = formatCodes.L\n\nexport default function(d, format) {\n  var output = ''\n  var remaining = format\n\n  while (true) {\n    var r = /%./g\n    var results = r.exec(remaining)\n\n    // No more format codes. Add the remaining text and return\n    if (!results) {\n      return output + remaining\n    }\n\n    // Add the preceding text\n    output += remaining.slice(0, r.lastIndex - 2)\n    remaining = remaining.slice(r.lastIndex)\n\n    // Add the format code\n    var ch = results[0].charAt(1)\n    var func = formatCodes[ch]\n    output += func ? func.call(this, d) : '%' + ch\n  }\n}\n\n","export function argsToObject(args) {\n  let obj = {};\n  for (let i=0; i < args.length; i+=2) {\n    let key = args[i];\n    let value = args[i + 1];\n    obj[key] = value;\n  }\n  return obj;\n}\n","import * as lexical from '../lexical.js';\nimport { AssertionError } from './error.js';\n\nexport const delimiters = [ `'`, '\"' ];\n\nexport function matchRightBracket (str, begin) {\n  var stack = 1 // count of '[' - count of ']'\n  for (var i = begin; i < str.length; i++) {\n    if (str[i] === '[') {\n      stack++\n    }\n    if (str[i] === ']') {\n      stack--\n      if (stack === 0) {\n        return i\n      }\n    }\n  }\n  return -1\n}\n\nexport function splitPath(str) {\n  let strLen = str.length;\n  let tokens = [];\n  for (let cursor=0; cursor < strLen;) {\n    // log('[loop]', str[cursor]);\n    switch (str[cursor]) {\n      case '[':\n        let delimiter = str[cursor + 1]\n        if (delimiters.indexOf(delimiter) > -1) { // access by quoted name: foo[\"bar\"]\n          let nameEndIndex = str.indexOf(delimiter, cursor + 2);\n          if (nameEndIndex < 0) {\n            throw new AssertionError(`unbalanced ${delimiter}: \"${str}\"`);\n          }\n          let nameToken = str.slice(cursor + 2, nameEndIndex);\n          tokens.push(nameToken);\n          cursor = nameEndIndex + 2; // the closing \" and ]\n          // log('BRACKET w/delimiter',nameEndIndex, nameToken);\n        }\n        else { // access by variable: foo[bar.coo]\n          let variableEndIndex = matchRightBracket(str, cursor + 1);\n          if (variableEndIndex < 0) {\n            throw new AssertionError(`unbalanced []: \"${str}\"`);\n          }\n          let variableToken = str.slice(cursor + 1, variableEndIndex);\n          if (lexical.isInteger(variableToken)) { // foo[1]\n            // log('BRACKET; number', variableToken);\n            tokens.push(variableToken);\n          }\n          else {\n            // log('BRACKET; name', variableToken);\n            tokens.push(this.get(variableToken));\n          }\n          cursor = variableEndIndex + 1;\n        }\n        break;\n      case '.': // separator: foo.bar, foo[0].bar\n        cursor++;\n        // log('DOT');\n        break;\n      default: // access by unquoted name: foo.bar\n        let nextBracketIndex    = str.indexOf('[', cursor);\n        let nextDotIndex        = str.indexOf('.', cursor);\n        let foundIndexes        = [ strLen, nextBracketIndex, nextDotIndex ].filter(index => index > -1);\n        let nextSeparator       = Math.min.apply(Math, foundIndexes);\n        let unquotedNameToken   = str.slice(cursor, nextSeparator);\n        // log('DEFAULT', {nextBracketIndex,nextDotIndex,nextSeparator,unquotedNameToken});\n        tokens.push(unquotedNameToken);\n        cursor = nextSeparator;\n        break;\n    }\n  }\n  return tokens;\n}\n","import { splitPath } from './util/object-path.js';\n\nexport default class Locale {\n  constructor(translation, id) {\n    this.translation = translation;\n    this.id = id;\n  }\n\n  splitPath(str) {\n    return splitPath(str);\n  }\n\n  translate(str) {\n    let tokens = this.splitPath(str);\n    return tokens.reduce((value, currentValue) => {\n      if (currentValue in value) {\n        return value[currentValue];\n      }\n      else {\n        throw new Error(`invalid translation key: \"${str}\"`);\n      }\n    }, this.translation);\n  }\n}\n\n// some implementations of liquid add higher level logic to filters e.g. shopify's section->schema->locale\n// the only way to be able to support that, is to allow locales to be provided in the scope.\n// this is a common key for accessing locales set by tags.  these locales will be detected\n// by filters.translate and checked first before looking at options.locale\nLocale.LOCALE_SCOPE_KEY = '_liquid_locale';\n","import strftime from './util/strftime.js';\nimport * as _ from './util/underscore.js';\nimport { argsToObject } from './util/args.js';\nimport { isTruthy } from './syntax.js';\nimport Locale from './locale.js';\n\nconst LOCALE_SCOPE_KEY = Locale.LOCALE_SCOPE_KEY;\n\nvar escapeMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&#34;',\n  \"'\": '&#39;'\n}\nvar unescapeMap = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&#34;': '\"',\n  '&#39;': \"'\"\n}\n\nvar createFilters = liquid => {\n  let filters = {\n    'abs': v => Math.abs(v),\n    'append': (v, arg) => v + arg,\n    'capitalize': str => stringify(str).charAt(0).toUpperCase() + str.slice(1),\n    'ceil': v => Math.ceil(v),\n    'concat': (v, arg) => Array.prototype.concat.call(v, arg),\n    'date': (v, arg) => {\n      var date = v\n      if (v === 'now') {\n        date = new Date()\n      } else if (_.isString(v)) {\n        date = new Date(v)\n      }\n      return isValidDate(date) ? strftime(date, arg) : v\n    },\n    'default': (v, arg) => isTruthy(v) ? v : arg,\n    'divided_by': (v, arg) => Math.floor(v / arg),\n    'downcase': v => v.toLowerCase(),\n    'escape': escape,\n\n    'escape_once': str => escape(unescape(str)),\n    'first': v => v[0],\n    'floor': v => Math.floor(v),\n    'join': (v, arg) => Array.isArray(v) ? v.join(arg) : v,\n    'last': v => v[v.length - 1],\n    'lstrip': v => stringify(v).replace(/^\\s+/, ''),\n    'map': (arr, arg) => arr.map(v => v[arg]),\n    'minus': bindFixed((v, arg) => v - arg),\n    'modulo': bindFixed((v, arg) => v % arg),\n    'newline_to_br': v => v.replace(/\\n/g, '<br />'),\n    'plus': bindFixed((v, arg) => Number(v) + Number(arg)),\n    'prepend': (v, arg) => arg + v,\n    'remove': (v, arg) => v.split(arg).join(''),\n    'remove_first': (v, l) => v.replace(l, ''),\n    'replace': (v, pattern, replacement) =>\n      stringify(v).split(pattern).join(replacement),\n    'replace_first': (v, arg1, arg2) => stringify(v).replace(arg1, arg2),\n    'reverse': v => v.reverse(),\n    'round': (v, arg) => {\n      var amp = Math.pow(10, arg || 0)\n      return Math.round(v * amp, arg) / amp\n    },\n    'rstrip': str => stringify(str).replace(/\\s+$/, ''),\n    'size': v => v.length,\n    'slice': (v, begin, length) =>\n      v.substr(begin, length === undefined ? 1 : length),\n    'sort': (v, arg) => v.sort(arg),\n    'split': (v, arg) => stringify(v).split(arg),\n    'strip': (v) => stringify(v).trim(),\n    'strip_html': v => stringify(v).replace(/<\\/?\\s*\\w+\\s*\\/?>/g, ''),\n    'strip_newlines': v => stringify(v).replace(/\\n/g, ''),\n    'times': (v, arg) => v * arg,\n    'truncate': (v, l, o) => {\n      v = stringify(v)\n      o = (o === undefined) ? '...' : o\n      l = l || 16\n      if (v.length <= l) return v\n      return v.substr(0, l - o.length) + o\n    },\n    'truncatewords': (v, l, o) => {\n      if (o === undefined) o = '...'\n      var arr = v.split(' ')\n      var ret = arr.slice(0, l).join(' ')\n      if (arr.length > l) ret += o\n      return ret\n    },\n    'uniq': function (arr) {\n      var u = {}\n      return (arr || []).filter(val => {\n        if (u.hasOwnProperty(val)) {\n          return false\n        }\n        u[val] = true\n        return true\n      })\n    },\n    'upcase': str => stringify(str).toUpperCase(),\n    'url_encode': encodeURIComponent,\n    'translate': function() {\n      let scope   = this;\n      let args    = Array.from(arguments);\n      let v       = args.shift();\n      let context = argsToObject(args);\n      return scope.get(LOCALE_SCOPE_KEY).then(scopeLocales => {\n        let locales = [];\n        if (scopeLocales && scopeLocales.length > 0) {\n          if (!Array.isArray(scopeLocales)) {\n            throw new Error(`scope locales must be array; \"${typeof scopeLocales}\" provided`);\n          }\n          locales.push.apply(locales, scopeLocales);\n        }\n        if (liquid.options.locale) { // add/check last\n          locales.push(liquid.options.locale);\n        }\n        if (locales.length) {\n          for (let i=0; i < locales.length; i++) {\n            let locale = locales[i];\n            let translation;\n            try {\n              translation = locale.translate(v);\n            }\n            catch (err) {\n              if (err.message.indexOf('invalid translation key') > -1) {\n                continue; // not found.  try next locale\n              }\n              else {\n                throw err;\n              }\n            }\n            let countExists   = 'count' in context;\n            let notNull       = null !== translation && undefined !== translation;\n            let typeIsObject  = typeof translation === 'object';\n            if (countExists && notNull && typeIsObject) {\n              let { count } = context;\n              if (count === undefined) count = 0;\n              if (count === 0) {\n                translation = translation.zero || translation.other;\n              }\n              else if (count === 1) {\n                translation = translation.one || translation.other;\n              }\n              else if (count === 2) {\n                translation = translation.two || translation.other;\n              }\n              else {\n                translation = translation.other;\n              }\n            }\n            return liquid.parseAndRender(translation, context);\n          }\n          // it wasn't found in any of the provided locales\n          throw new Error(`invalid translation key: \"${v}\"; not found in any of the provided locales`);\n        }\n        else {\n          return '';\n        }\n      });\n    },\n  };\n  // alias\n  filters.t = filters.translate;\n  return filters;\n};\n\nfunction escape (str) {\n  return stringify(str).replace(/&|<|>|\"|'/g, m => escapeMap[m])\n}\n\nfunction unescape (str) {\n  return stringify(str).replace(/&(amp|lt|gt|#34|#39);/g, m => unescapeMap[m])\n}\n\nfunction getFixed (v) {\n  var p = (v + '').split('.')\n  return (p.length > 1) ? p[1].length : 0\n}\n\nfunction getMaxFixed (l, r) {\n  return Math.max(getFixed(l), getFixed(r))\n}\n\nfunction stringify (obj) {\n  return obj + ''\n}\n\nfunction bindFixed (cb) {\n  return (l, r) => {\n    var f = getMaxFixed(l, r)\n    return cb(l, r).toFixed(f)\n  }\n}\n\nfunction registerAll (liquid) {\n  let filters = createFilters(liquid);\n  return _.forOwn(filters, (func, name) => liquid.registerFilter(name, func))\n}\n\nfunction isValidDate (date) {\n  return date instanceof Date && !isNaN(date.getTime())\n}\n\nexport default registerAll;\n","import { createScope } from './scope';\nimport * as _ from './util/underscore.js';\nimport assert from './util/assert.js';\nimport { parse } from './tokenizer.js';\nimport { statFileAsync, readFileAsync } from './util/fs.js';\nimport path from 'path';\nimport * as url from './util/url.js';\nimport Render from './render.js';\nimport Tag from './tag.js';\nimport Filter from './filter.js';\nimport Parser from './parser';\nimport tags from './tags';\nimport filters from './filters';\nimport Locale from './locale';\nimport { anySeries } from './util/promise.js';\n\nvar _engine = {\n  init: function (tag, filter, options) {\n    if (options.cache) {\n      this.cache = {}\n    }\n    this.options = options\n    this.tag = tag\n    this.filter = filter\n    this.parser = Parser(tag, filter)\n    this.renderer = Render()\n\n    tags(this)\n    filters(this)\n\n    return this\n  },\n  loadTranslation: function(translation, id) {\n    this.options.locale = new Locale(translation, id);\n  },\n  parse: function (html, filepath) {\n    var tokens = parse(html, filepath, this.options)\n    return this.parser.parse(tokens)\n  },\n  render: function (tpl, ctx, opts) {\n    opts = _.assign({}, this.options, opts)\n    var scope = createScope(ctx, opts)\n    return this.renderer.renderTemplates(tpl, scope)\n  },\n  parseAndRender: function (html, ctx, opts) {\n    return Promise.resolve()\n      .then(() => this.parse(html))\n      .then(tpl => this.render(tpl, ctx, opts))\n  },\n  renderFile: function (filepath, ctx, opts) {\n    opts = _.assign({}, opts)\n    return this.getTemplate(filepath, opts.root)\n      .then(templates => this.render(templates, ctx, opts))\n  },\n  evalValue: function (str, scope) {\n    var tpl = this.parser.parseValue(str.trim())\n    return this.renderer.evalValue(tpl, scope)\n  },\n  registerFilter: function (name, filter) {\n    return this.filter.register(name, filter)\n  },\n  registerTag: function (name, tag) {\n    return this.tag.register(name, tag)\n  },\n  lookup: function (filepath, root) {\n    root = this.options.root.concat(root || [])\n    root = _.uniq(root)\n    var paths = root.map(root => path.resolve(root, filepath))\n    return anySeries(paths, path => statFileAsync(path).then(() => path))\n      .catch((e) => {\n        e.message = `${e.code}: Failed to lookup ${filepath} in: ${root}`\n        throw e\n      })\n  },\n  getTemplate: function (filepath, root) {\n    if (this.options.templateProvider) {\n      return this.options.templateProvider(filepath).then(str => {\n        let tpl = this.parse(str);\n        if (this.options.cache) {\n          this.cache[filepath] = tpl;\n        }\n        return tpl;\n      });\n    }\n    else {\n      return typeof XMLHttpRequest === 'undefined'\n        ? this.getTemplateFromFile(filepath, root)\n        : this.getTemplateFromUrl(filepath, root);\n    }\n  },\n  getTemplateFromFile: function (filepath, root) {\n    if (!path.extname(filepath)) {\n      filepath += this.options.extname\n    }\n    return this\n      .lookup(filepath, root)\n      .then(filepath => {\n        if (this.options.cache) {\n          var tpl = this.cache[filepath]\n          if (tpl) {\n            return Promise.resolve(tpl)\n          }\n          return readFileAsync(filepath)\n            .then(str => this.parse(str))\n            .then(tpl => (this.cache[filepath] = tpl))\n        } else {\n          return readFileAsync(filepath)\n            .then(str => this.parse(str, filepath))\n        }\n      })\n  },\n  getTemplateFromUrl: function (filepath, root) {\n    var fullUrl\n    if (url.valid(filepath)) {\n      fullUrl = filepath\n    } else {\n      if (!url.extname(filepath)) {\n        filepath += this.options.extname\n      }\n      fullUrl = url.resolve(root || this.options.root, filepath)\n    }\n    if (this.options.cache) {\n      var tpl = this.cache[filepath]\n      if (tpl) {\n        return Promise.resolve(tpl)\n      }\n    }\n    return new Promise((resolve, reject) => {\n      var xhr = new XMLHttpRequest()\n      xhr.onload = () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var tpl = this.parse(xhr.responseText)\n          if (this.options.cache) {\n            this.cache[filepath] = tpl\n          }\n          resolve(tpl)\n        } else {\n          reject(new Error(xhr.statusText))\n        }\n      }\n      xhr.onerror = () => {\n        reject(new Error('An error occurred whilst sending the response.'))\n      }\n      xhr.open('GET', fullUrl)\n      xhr.send()\n    })\n  },\n  express: function (opts) {\n    opts = opts || {}\n    var self = this\n    return function (filePath, ctx, callback) {\n      assert(Array.isArray(this.root) || _.isString(this.root),\n        'illegal views root, are you using express.js?')\n      opts.root = this.root\n      self.renderFile(filePath, ctx, opts)\n        .then(html => callback(null, html))\n        .catch(e => callback(e))\n    }\n  }\n}\n\nfunction normalizeStringArray (value) {\n  if (Array.isArray(value)) return value\n  if (_.isString(value)) return [value]\n  return []\n}\n\nexport default function(options) {\n  options = _.assign({\n    root: ['.'],\n    cache: false,\n    extname: '',\n    dynamicPartials: true,\n    trim_tag_right: false,\n    trim_tag_left: false,\n    trim_value_right: false,\n    trim_value_left: false,\n    greedy: true,\n    strict_filters: false,\n    strict_variables: false,\n    templateProvider: null,\n    beforeScopeProvides: null,\n    locale: null,\n  }, options)\n  options.root = normalizeStringArray(options.root)\n\n  var engine = Object.create(_engine)\n  engine.init(Tag(), Filter(options), options)\n  return engine\n}\n\n"],"names":["isString","value","String","isNil","undefined","forOwn","object","iteratee","k","hasOwnProperty","assign","isObject","srcs","Array","prototype","slice","call","arguments","forEach","src","_assignBinary","dst","v","last","arr","length","uniq","u","a","i","l","push","type","range","start","stop","step","EmptyVariable","toString","toJSON","EMPTY","singleQuoted","doubleQuoted","quoted","RegExp","source","quoteBalanced","integer","number","bool","identifier","subscript","literal","variable","rangeLimit","rangeCapture","hash","hashCapture","tagLine","literalLine","variableLine","numberLine","boolLine","quotedLine","rangeLine","integerLine","valueDeclaration","valueList","filter","filterCapture","filterLine","operators","isInteger","str","test","isLiteral","isVariable","matchValue","exec","parseLiteral","indexOf","res","match","Number","toLowerCase","TypeError","initError","name","constructor","Error","captureStackTrace","initLiquidError","err","token","input","line","file","context","mkContext","message","mkMessage","stack","TokenizationError","Object","create","ParseError","e","originalError","RenderError","tpl","RenderBreakError","AssertionError","lines","split","begin","Math","max","end","min","_","map","align","join","n","blank","msg","assert","predicate","isNull","compatSize","result","isArray","size","keys","compatFirst","first","compatLast","delimiters","forbidden","isVariableValid","varName","trim","validateContextObject","ctx","Scope","scopes","Promise","resolve","reject","getPropertyByPath","then","catch","opts","strict_variables","beforeScopeProvides","getFromContext","scope","findScopeFor","pop","key","unshift","shift","path","propertyAccessSeq","paths","getValueFromScopes","reduce","getValueFromParent","tokenProviders","strLen","cursor","delimiter","nameEndIndex","nameToken","variableEndIndex","matchRightBracket","variableToken","lexical","get","nextBracketIndex","nextDotIndex","foundIndexes","index","nextSeparator","apply","unquotedNameToken","all","setPropertyByPath","obj","val","replace","compatibility","createScope","defaultOptions","shouldTrimLeft","inRaw","options","trim_left","trim_tag_left","trim_value_left","shouldTrimRight","trim_right","trim_tag_right","trim_value_right","trimLeft","greedy","rLeft","trimRight","rRight","whiteSpaceCtrl","tokens","parse","rLiquid","currIndent","lineNumber","LineNumber","lastMatchEnd","lastIndex","parseHTMLToken","parseTagToken","parseValueToken","raw","pos","args","htmlFragment","html","parsedLinesCount","lastMatchBegin","readFileAsync","filepath","readFile","content","statFileAsync","stat","define","this","splitPathRe","urlRe","extname","valid","root","charAt","resolveUrl","SafeObject","comparisonId","defineProperty","COMPARISON_KEY","isNullOrUndefined","comparingEmpty","vars","find","createOperator","handler","r","isTruthy","_createOperator","bind","createOperators","evalExp","exp","operatorREs","operatorRE","expRE","results","op","evalValue","low","high","j","substr","isFalsy","anySeries","iterable","ret","item","idx","mapSeries","x","firstSeries","fallbackFn","winner","promise","found","render","templates","renderTemplate","partial","resolvedHTML","template","renderTag","stringify","Syntax","initial","filters","prev","next","initialValue","JSON","instance","markup","vals","tagImpls","_tagInstance","impl","tagImpl","register","tag","construct","clear","valueRE","_filterInstance","output","arg","argList","strict_filters","re","keyMatch","currentMatchIsKey","Tag","Filter","stream","handlers","cb","event","h","trigger","stopRequested","parseToken","parseTag","parseValue","parseStream","s","init","liquid","registerTag","set","tagToken","remainTokens","parser","on","renderer","renderTemplates","evaluateBranch","cond","cases","elseTemplates","p","branch","groupRE","candidatesRE","group","candidates","fingerprint","groups","candidate","collection","reversed","offset","limit","reverse","contexts","forloop","branches","withRE","staticFileRE","staticValue","with","dynamicPartials","originBlocks","blocks","originBlockMode","blockMode","getTemplate","staticLayout","layout","tpls","block","cols","row","col","some","floor","engine","tag_assign","tag_capture","tag_case","tag_comment","tag_cycle","tag_decrement","tag_for","tag_if","tag_include","tag_increment","tag_layout","tag_raw","tag_tablerow","tag_unless","monthNames","monthNamesShort","dayNames","dayNamesShort","suffixes","_date","d","feb","isLeapYear","num","getMonth","daysInMonth","getDate","startDay","now","getDayOfYear","getDay","jan1","Date","getFullYear","_number","pad","year","parseInt","substring","ch","formatCodes","toLocaleString","century","getHours","getMilliseconds","getMinutes","getSuffix","round","valueOf","getSeconds","getWeekOfYear","toLocaleDateString","toLocaleTimeString","tz","getTimezoneOffset","abs","b","N","L","format","remaining","func","argsToObject","splitPath","Locale","translation","id","currentValue","LOCALE_SCOPE_KEY","escapeMap","unescapeMap","createFilters","toUpperCase","ceil","concat","date","isValidDate","strftime","escape","unescape","bindFixed","pattern","replacement","arg1","arg2","amp","pow","sort","o","encodeURIComponent","from","locales","scopeLocales","locale","translate","countExists","notNull","typeIsObject","count","zero","other","one","two","parseAndRender","t","m","getFixed","getMaxFixed","f","toFixed","registerAll","registerFilter","isNaN","getTime","_engine","cache","Parser","Render","code","templateProvider","XMLHttpRequest","getTemplateFromFile","getTemplateFromUrl","lookup","fullUrl","url","xhr","onload","status","responseText","statusText","onerror","open","send","self","filePath","callback","renderFile","normalizeStringArray"],"mappings":"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"}